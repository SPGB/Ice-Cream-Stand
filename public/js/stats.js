function pull_chat(){$.ajax({url:"chat",dataType:"JSON",type:"GET",timeout:5e3,success:function(t){$(".chat").html("");for(var a=0;a<t.length;a++){var n=t[a];$(".chat").prepend('<div class="msg"><span class="msg_user">'+n.user+"</span>"+n.text+"</msg>")}}})}function pull_online(){$.ajax({url:"online/total",dataType:"JSON",type:"GET",timeout:5e3,success:function(t){$("body").attr("class","");var a=Date.now()-start_time;$("#ping").text(a+"ms").attr("class",""),$("#ping").addClass(100>a?"ping_good":a>500?"ping_bad":"ping_avg"),$("h1").text(t.c+" On"),$("#accounts").text(numberWithCommas(t.t)),(!min||t.c<min)&&($("#min").text(t.c),min=t.c),(!max||t.c>max)&&($("#max").text(t.c),max=t.c)},error:function(){$("body").attr("class","failure")}})}function numberWithCommas(t){return t&&"undefined"!=typeof t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):""}var min,max,start_time=Date.now(),ping_average;$(document).ready(function(){$("body").append('<link rel="stylesheet" href="https://s3.amazonaws.com/icecreamstand.com/stats.css.gz"><section><h1>101</h1><div class="header_sub">Active Accounts: <span id="accounts"></span> Min: <span id="min">99</span> Max: <span id="max">99</span></div><div class="chat"></div><div class="response_time">Ping: <span id="ping">100ms</span></div></section>'),pull_chat(),pull_online(),setInterval(function(){start_time=Date.now(),pull_chat(),pull_online()},1e4)});